<div *ngIf="!editMode && basicDatas">
    <h3>Identification</h3>
    <hr>
    <img src="{{ completeUrl }}" alt="Photo de profil" height="200" />
    <hr>
    <p>{{ basicDatas.email }}</p>
    <p>{{ age }} ans</p>
    <p>{{ basicDatas.firstName }}</p>
    <p>{{ basicDatas.lastName | uppercase }}</p>
    <p>{{ basicDatas.phoneNumber }}</p>
    <p *ngIf="adress">{{ adress.streetNumber }} {{ adress.street }}, <span *ngIf="adress.appartment != null && adress.appartment != ''">{{ adress.appartment }},</span> {{ adress.postalCode }} {{ adress.town }}</p>
    <hr>
    <div class="alert alert-danger text-center" *ngIf="errorMessage">
        <p><strong>{{ errorMessage }}</strong></p>
    </div>
</div>


<div *ngIf="editMode">
    <div *ngIf="basicDatas" id="display">
        <h3>Identification</h3>
        <hr>
        <img src="{{ completeUrl }}" alt="Photo de profil" height="200" />
        <hr>
        <p>{{ basicDatas.email }}</p>
        <p>{{ basicDatas.phoneNumber }}</p>
        <p *ngIf="adress">{{ adress.streetNumber }} {{ adress.street }}, <span *ngIf="adress.appartment != null && adress.appartment != ''">{{ adress.appartment }},</span> {{ adress.postalCode }} {{ adress.town }}</p>
        <hr>
    </div>
    <br>
    <div id="edit">
        <div class="alert alert-danger text-center" *ngIf="errorMessage">
            <p><strong>{{ errorMessage }}</strong></p>
        </div>
        <div class="alert alert-succes text-center" *ngIf="sucessMessage">
            <p><strong>{{ sucessMessage }}</strong></p>
        </div>
        <div *ngIf="photoPath">
            <form #form="ngForm" (ngSubmit)="updatePhoto()">
                <h4>Modifier la photo de profil :</h4>
                <br>
                <div class="form-group">
                    <label for="photo">Chemin de la nouvelle photo de profil : </label>
                    <input type="text" [(ngModel)]="photoPath.photoPath" #photo="ngModel" class="form-control" id="photo" name="photo" required >
                    <div class="alert alert-danger" *ngIf="(photo.dirty || photo.touched) && photo.errors">
                        Le chemin de la nouvelle photo est invalide (Ce champ est obligatoire).
                    </div>
                </div>
                <hr>
                <div class="text-center">
                    <button [disabled]="form.invalid" type="submit" class="btn btn-primary">Modifier</button>
                </div>
            </form>
        </div>
        <hr>
        <div class="container">
            <div class="row">
                <div class="col-md-6 offset-md-3">
                    <form #form4="ngForm" (ngSubmit)="updatePhotoImage()">
                        <h3>Choisir une nouvelle photo :</h3>
                        <div class="form-group">
                            <input type="file" name="image" (change)="fileProgress($event)" />
                        </div>
                        <div class="image-preview mb-3" *ngIf="previewUrl">
                            <img [src]="previewUrl" height="300" />
                        </div>
                        <div class="form-group">
                            <button type="submit" class="btn btn-primary">Télécharger</button>
                        </div>
                    </form>
                </div>
            </div>
        </div>
        <hr>
        <div *ngIf="phoneNumber">
            <form #form2="ngForm" (ngSubmit)="updatePhoneNumber()">
                <h4>Modifier le numérode téléphone :</h4>
                <br>
                <div class="form-group">
                    <label for="phone">Nouveau numéro : </label>
                    <input type="text" [(ngModel)]="phoneNumber.phoneNumber" #phone="ngModel" class="form-control" id="phone" name="phone" required pattern="^(?:(?:\+|00)33[\s.-]{0,3}(?:\(0\)[\s.-]{0,3})?|0)[1-9](?:(?:[\s.-]?\d{2}){4}|\d{2}(?:[\s.-]?\d{3}){2})$">
                    <div class="alert alert-danger" *ngIf="(phone.dirty || phone.touched) && phone.errors">
                        Le format du nouveau numéro est invalide. Il doit correspondre au format suivant : 0X.XX.XX.XX.XX
                    </div>
                </div>
                <hr>
                <div class="text-center">
                    <button [disabled]="form2.invalid" type="submit" class="btn btn-primary">Modifier</button>
                </div>
            </form>
        </div>
        <hr>
        <div *ngIf="adress">
            <form #form3="ngForm" (ngSubmit)="updateAdress()">
                <h4>Modifier l'adresse postale :</h4>
                <br>
                <div class="form-group">
                    <label for="streetNumber">Nouveau numéro de rue : </label>
                    <input type="number" [(ngModel)]="adress.streetNumber" #streetNumber="ngModel" class="form-control" id="streetNumber" name="streetNumber" required >
                    <div class="alert alert-danger" *ngIf="(streetNumber.dirty || streetNumber.touched) && streetNumber.errors">
                        Une adresse a obligatoirement un numéro de rue
                    </div>
                </div>
                <br>
                <div class="form-group">
                    <label for="streetName">Nouveau nom de rue : </label>
                    <input type="text" [(ngModel)]="adress.street" #streetName="ngModel" class="form-control" id="streetName" name="streetName" required >
                    <div class="alert alert-danger" *ngIf="(streetName.dirty || streetName.touched) && streetName.errors">
                        Une adresse a obligatoirement un nom de rue
                    </div>
                </div>
                <br>
                <div class="form-group">
                    <label for="appt">Nouvel appartement (optionnel) : </label>
                    <input type="text" [(ngModel)]="adress.appartment" #appt="ngModel" class="form-control" id="appt" name="appt" >
                </div>
                <br>
                <div class="form-group">
                    <label for="postalCode">Nouveau code postal : </label>
                    <input type="number" [(ngModel)]="adress.postalCode" #postalCode="ngModel" class="form-control" id="postalCode" name="postalCode" required pattern="^[0-9]{5}$" >
                    <div class="alert alert-danger" *ngIf="(postalCode.dirty || postalCode.touched) && postalCode.errors">
                        Une adresse a obligatoirement un code postal composé de 5 chiffres
                    </div>
                </div>
                <br>
                <div class="form-group">
                    <label for="city">Nouveau nom de ville : </label>
                    <input type="text" [(ngModel)]="adress.town" #city="ngModel" class="form-control" id="city" name="city" required >
                    <div class="alert alert-danger" *ngIf="(city.dirty || city.touched) && city.errors">
                        Une adresse a obligatoirement un nom de ville
                    </div>
                </div>
                <hr>
                <div class="text-center">
                    <button [disabled]="form3.invalid" type="submit" class="btn btn-primary">Modifier</button>
                </div>
            </form>
        </div>
        <hr>
    </div>
</div>
