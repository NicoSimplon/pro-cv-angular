
<div class="mt-4 mb-4 card bg-dark" *ngIf="user">
    <div class="card-header">
        <h4 class="sectionTitle colorTitle">Modifier le profil</h4>
    </div>
    <div class="card-body">
        <div class="alert alert-danger text-center" *ngIf="errorMessage">
            <p>
                <strong>{{ errorMessage }}</strong>
            </p>
        </div>
        <div class="alert alert-succes text-center" *ngIf="sucessMessage">
            <p>
                <strong>{{ sucessMessage }}</strong>
            </p>
        </div>
        <form #form="ngForm" (ngSubmit)="updateProfil()" >
            <div class="form-group">
                <label for="email">Nouvelle adresse email : </label>
                <input type="email" [(ngModel)]="modifiedUser.newEmail" #email="ngModel" class="form-control" id="email" name="email" required />
                <div class="alert alert-danger" *ngIf="(email.dirty || email.touched) && email.errors" >
                    Le nouvel email est invalide (Ce champ est obligatoire).
                </div>
            </div>
            <div class="form-group">
                <label for="pass1">Nouveau mot de passe :</label>
                <input type="password" [(ngModel)]="modifiedUser.password" #pass1="ngModel" class="form-control" id="pass1" name="pass1"  pattern="^(?=.*[a-z])(?=.*[A-Z])(?=.*\d)(?=.*[!@#$%^&'])[^ ]{8,}$" required />
                <div class="alert alert-danger" *ngIf="(pass1.dirty || pass1.touched) && pass1.errors">
                    Ce champ est obligatoire. De préférence le mot de passe doit contenir 8 caractères minimum, dont une majuscule, un chiffre et un caractère spacial.
                </div>
            </div>
            <div class="form-group">
                <label for="pass2" >Confirmer le nouveau mot de passe :</label>
                <input type="password" [(ngModel)]="password" #pass2="ngModel" class="form-control" id="pass2" name="pass2" pattern="^(?=.*[a-z])(?=.*[A-Z])(?=.*\d)(?=.*[!@#$%^&'])[^ ]{8,}$" required />
                <div class="alert alert-danger" *ngIf="((pass2.dirty || pass2.touched) && pass2.errors) || (pass1.value != pass2.value)">
                    Les deux mots de passes ne correspondent pas ou sont incorrects.
                </div>
            </div>
            <div class="text-center">
                <button [disabled]="form.invalid" type="submit" class="btn btn-warning btn-lg">
                    Modifier
                </button>
            </div>
        </form>
    </div>
</div>
